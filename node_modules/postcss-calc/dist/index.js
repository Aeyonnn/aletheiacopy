"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

<<<<<<< HEAD
var _postcss = require("postcss");

=======
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
var _transform = _interopRequireDefault(require("./lib/transform"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

<<<<<<< HEAD
var _default = (0, _postcss.plugin)('postcss-calc', function (opts) {
  var options = Object.assign({
=======
/**
 * @typedef {{precision?: number | false,
 *          preserve?: boolean, 
 *          warnWhenCannotResolve?: boolean, 
 *          mediaQueries?: boolean, 
 *          selectors?: boolean}} PostCssCalcOptions
 */

/**
* @type {import('postcss').PluginCreator<PostCssCalcOptions>}
* @param {PostCssCalcOptions} opts
* @return {import('postcss').Plugin}
*/
function pluginCreator(opts) {
  const options = Object.assign({
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
    precision: 5,
    preserve: false,
    warnWhenCannotResolve: false,
    mediaQueries: false,
    selectors: false
  }, opts);
<<<<<<< HEAD
  return function (css, result) {
    css.walk(function (node) {
      var type = node.type;

      if (type === 'decl') {
        (0, _transform.default)(node, "value", options, result);
      }

      if (type === 'atrule' && options.mediaQueries) {
        (0, _transform.default)(node, "params", options, result);
      }

      if (type === 'rule' && options.selectors) {
        (0, _transform.default)(node, "selector", options, result);
      }
    });
  };
});

=======
  return {
    postcssPlugin: 'postcss-calc',

    OnceExit(css, {
      result
    }) {
      css.walk(node => {
        const {
          type
        } = node;

        if (type === 'decl') {
          (0, _transform.default)(node, "value", options, result);
        }

        if (type === 'atrule' && options.mediaQueries) {
          (0, _transform.default)(node, "params", options, result);
        }

        if (type === 'rule' && options.selectors) {
          (0, _transform.default)(node, "selector", options, result);
        }
      });
    }

  };
}

pluginCreator.postcss = true;
var _default = pluginCreator;
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
exports.default = _default;
module.exports = exports.default;