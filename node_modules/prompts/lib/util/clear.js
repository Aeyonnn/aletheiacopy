'use strict';

const strip = require('./strip');
const { erase, cursor } = require('sisteransi');

const width = str => [...strip(str)].length;

<<<<<<< HEAD
module.exports = function(prompt, perLine = process.stdout.columns) {
=======
/**
 * @param {string} prompt
 * @param {number} perLine
 */
module.exports = function(prompt, perLine) {
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
  if (!perLine) return erase.line + cursor.to(0);

  let rows = 0;
  const lines = prompt.split(/\r?\n/);
  for (let line of lines) {
    rows += 1 + Math.floor(Math.max(width(line) - 1, 0) / perLine);
  }

<<<<<<< HEAD
  return (erase.line + cursor.prevLine()).repeat(rows - 1) + erase.line + cursor.to(0);
=======
  return erase.lines(rows);
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
};
