<<<<<<< HEAD
var compactable = require('../compactable');
=======
var configuration = require('../../configuration');
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0

function findComponentIn(shorthand, longhand) {
  var comparator = nameComparator(longhand);

  return findInDirectComponents(shorthand, comparator) || findInSubComponents(shorthand, comparator);
}

function nameComparator(to) {
  return function (property) {
    return to.name === property.name;
  };
}

function findInDirectComponents(shorthand, comparator) {
  return shorthand.components.filter(comparator)[0];
}

function findInSubComponents(shorthand, comparator) {
  var shorthandComponent;
  var longhandMatch;
  var i, l;

<<<<<<< HEAD
  if (!compactable[shorthand.name].shorthandComponents) {
=======
  if (!configuration[shorthand.name].shorthandComponents) {
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
    return;
  }

  for (i = 0, l = shorthand.components.length; i < l; i++) {
    shorthandComponent = shorthand.components[i];
    longhandMatch = findInDirectComponents(shorthandComponent, comparator);

    if (longhandMatch) {
      return longhandMatch;
    }
  }

  return;
}

module.exports = findComponentIn;
